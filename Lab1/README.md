# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 1: –†–∞–±–æ—Ç–∞ —Å JSON –∏ —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –æ–±—ä–µ–∫—Ç–æ–≤ –≤ JSON, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–∞—Ç—Ç–µ—Ä–Ω–∞ `IDisposable` –≤ C#.

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Lab1/
‚îú‚îÄ‚îÄ Person.cs                  # –ö–ª–∞—Å—Å Person —Å JSON-–∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
‚îú‚îÄ‚îÄ PersonSerializer.cs        # –ö–ª–∞—Å—Å –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Person
‚îú‚îÄ‚îÄ FileResourceManager.cs     # –ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏
‚îú‚îÄ‚îÄ PersonSerializerTests.cs  # –¢–µ—Å—Ç—ã –¥–ª—è PersonSerializer
‚îú‚îÄ‚îÄ Program.cs                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ Lab1.csproj               # –§–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞
```

## üì¶ –ö–ª–∞—Å—Å—ã –ø—Ä–æ–µ–∫—Ç–∞

### 1. `Person` - –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

–ö–ª–∞—Å—Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–µ–ª–æ–≤–µ–∫–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö JSON-–∞—Ç—Ä–∏–±—É—Ç–æ–≤.

#### –°–≤–æ–π—Å—Ç–≤–∞:

- **FirstName** (`string`) - –ò–º—è
- **LastName** (`string`) - –§–∞–º–∏–ª–∏—è
- **Age** (`int`) - –í–æ–∑—Ä–∞—Å—Ç
- **Password** (`string`) - –ü–∞—Ä–æ–ª—å (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `[JsonIgnore]`)
- **Id** (`string`) - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ `"personId"` —á–µ—Ä–µ–∑ `[JsonPropertyName]`)
- **BirthDate** (`DateTime`) - –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ, private –ø–æ–ª–µ —Å `[JsonInclude]`)
- **Email** (`string`) - Email —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è '@')
- **PhoneNumber** (`string`) - –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ `"phone"`)

#### –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

- **FullName** (`string`, —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) - –ü–æ–ª–Ω–æ–µ –∏–º—è (FirstName + LastName)
- **IsAdult** (`bool`, —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–∏—è (Age >= 18)

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```csharp
var person = new Person
{
    FirstName = "–ò–≤–∞–Ω",
    LastName = "–ò–≤–∞–Ω–æ–≤",
    Age = 25,
    Id = "12345",
    BirthDate = new DateTime(1999, 1, 15),
    Email = "ivan@example.com",
    PhoneNumber = "+7-999-123-45-67"
};

Console.WriteLine(person.FullName);  // "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
Console.WriteLine(person.IsAdult);   // true
```

---

### 2. `PersonSerializer` - –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –æ–±—ä–µ–∫—Ç–æ–≤ `Person` –≤ JSON –∏ –æ–±—Ä–∞—Ç–Ω–æ.

#### –ú–µ—Ç–æ–¥—ã:

1. **`SerializeToJson(Person person)`** - –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞ –≤ JSON-—Å—Ç—Ä–æ–∫—É
2. **`DeserializeFromJson(string json)`** - –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ JSON-—Å—Ç—Ä–æ–∫–∏
3. **`SaveToFile(Person person, string filePath)`** - –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª
4. **`LoadFromFile(string filePath)`** - –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞
5. **`SaveToFileAsync(Person person, string filePath)`** - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª
6. **`LoadFromFileAsync(string filePath)`** - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞
7. **`SaveListToFile(List<Person> people, string filePath)`** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤
8. **`LoadListFromFile(string filePath)`** - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `System.Text.Json` –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π (–±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è Unicode)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```csharp
var serializer = new PersonSerializer();
var person = new Person { FirstName = "–ò–≤–∞–Ω", LastName = "–ò–≤–∞–Ω–æ–≤", Age = 25, Email = "ivan@example.com" };

// –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
string json = serializer.SerializeToJson(person);

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª
serializer.SaveToFile(person, "person.json");

// –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞
Person loadedPerson = serializer.LoadFromFile("person.json");

// –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏
var people = new List<Person> { person, person2 };
serializer.SaveListToFile(people, "people.json");
List<Person> loadedPeople = serializer.LoadListFromFile("people.json");
```

---

### 3. `FileResourceManager` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏

–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π `IDisposable` –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ä–µ—Å—É—Ä—Å–∞–º–∏.

#### –ü–æ–ª—è:

- `_fileStream` - –ü–æ—Ç–æ–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–º
- `_writer` - –ü–∏—Å–∞—Ç–µ–ª—å –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª
- `_reader` - –ß–∏—Ç–∞—Ç–µ–ª—å –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞
- `_disposed` - –§–ª–∞–≥ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- `_filePath` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É

#### –ú–µ—Ç–æ–¥—ã:

- **`FileResourceManager(string filePath, FileMode fileMode)`** - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- **`OpenForWriting()`** - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å–∏
- **`OpenForReading()`** - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è
- **`WriteLine(string text)`** - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ —Ñ–∞–π–ª
- **`ReadAllText()`** - –ß–∏—Ç–∞–µ—Ç –≤–µ—Å—å —Ñ–∞–π–ª
- **`AppendText(string text)`** - –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
- **`GetFileInfo()`** - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ (—Ä–∞–∑–º–µ—Ä, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è)
- **`Dispose()`** - –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- –†–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IDisposable`
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `using`)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```csharp
// –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
using (var manager = new FileResourceManager("test.txt"))
{
    manager.OpenForWriting();
    manager.WriteLine("–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞");
    manager.WriteLine("–í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞");
    
    manager.OpenForReading();
    string content = manager.ReadAllText();
    Console.WriteLine(content);
    
    FileInfo info = manager.GetFileInfo();
    Console.WriteLine($"–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: {info.Length} –±–∞–π—Ç");
} // –†–µ—Å—É—Ä—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è
```

---

### 4. `PersonSerializerTests` - –¢–µ—Å—Ç—ã

–ö–ª–∞—Å—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ `PersonSerializer`.

#### –¢–µ—Å—Ç—ã:

1. ‚úÖ –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ JSON
2. ‚úÖ –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ JSON
3. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
4. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
5. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞
6. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
7. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
8. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤ —Ñ–∞–π–ª
9. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞
10. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `JsonIgnore` –¥–ª—è Password
11. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `JsonPropertyName` –¥–ª—è Id –∏ PhoneNumber

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- .NET 9.0 SDK –∏–ª–∏ –≤—ã—à–µ
- –õ—é–±–∞—è IDE, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è C# (Visual Studio, Rider, VS Code)

### –ö–æ–º–∞–Ω–¥—ã:

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
dotnet restore

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
dotnet build

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ 
dotnet run

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
dotnet run --project Lab1/Lab1.csproj
```

---

## üìù –ü—Ä–∏–º–µ—Ä JSON-–≤—ã–≤–æ–¥–∞

–ü—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–∞ `Person` –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π JSON:

```json
{
  "FirstName": "–ò–≤–∞–Ω",
  "LastName": "–ò–≤–∞–Ω–æ–≤",
  "Age": 25,
  "personId": "12345",
  "_birthDate": "1999-01-15T00:00:00",
  "Email": "ivan@example.com",
  "phone": "+7-999-123-45-67"
}
```
---
